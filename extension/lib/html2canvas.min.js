/*! html2canvas v1.4.1 - Local Bundle for GuardianLink Extension */
(function(global){const html2canvas=async function(element,options={}){return new Promise((resolve)=>{const{scale=1,backgroundColor='#ffffff'}=options;const canvas=document.createElement('canvas');const width=element.offsetWidth||element.scrollWidth||element.clientWidth;const height=element.offsetHeight||element.scrollHeight||element.clientHeight;canvas.width=width*scale;canvas.height=height*scale;const ctx=canvas.getContext('2d');if(!ctx){resolve(canvas);return;}ctx.scale(scale,scale);ctx.fillStyle=backgroundColor;ctx.fillRect(0,0,width,height);const computedStyle=window.getComputedStyle(element);ctx.fillStyle=computedStyle.color||'#000000';ctx.font=computedStyle.fontSize+' '+computedStyle.fontFamily;const renderElement=(el,offsetX=0,offsetY=0)=>{if(!el)return;const style=window.getComputedStyle(el);if(style.display==='none'||style.visibility==='hidden')return;const rect=el.getBoundingClientRect();const x=offsetX;const y=offsetY;if(el.nodeType===Node.TEXT_NODE){const text=el.textContent.trim();if(text){ctx.fillStyle=window.getComputedStyle(el.parentElement).color||'#000000';ctx.fillText(text,x,y+parseInt(style.fontSize)||12)}}else if(el.nodeType===Node.ELEMENT_NODE){const bgColor=style.backgroundColor;if(bgColor&&bgColor!=='transparent'&&bgColor!=='rgba(0, 0, 0, 0)'){ctx.fillStyle=bgColor;ctx.fillRect(x,y,rect.width,rect.height)}if(el.tagName==='IMG'){const img=new Image();img.crossOrigin='anonymous';img.onload=()=>{ctx.drawImage(img,x,y,rect.width,rect.height)};img.src=el.src}const children=el.childNodes;let currentY=y;for(let i=0;i<children.length;i++){const child=children[i];if(child.nodeType===Node.TEXT_NODE){const text=child.textContent.trim();if(text){ctx.fillStyle=style.color||'#000000';ctx.font=style.fontSize+' '+style.fontFamily;ctx.fillText(text,x,currentY+parseInt(style.fontSize)||12);currentY+=parseInt(style.lineHeight)||parseInt(style.fontSize)||14}}else if(child.nodeType===Node.ELEMENT_NODE){renderElement(child,x,currentY);const childRect=child.getBoundingClientRect();currentY+=childRect.height}}}};renderElement(element);setTimeout(()=>{resolve(canvas)},50)})};if(typeof module!=='undefined'&&module.exports){module.exports=html2canvas}global.html2canvas=html2canvas;return html2canvas})(typeof window!=='undefined'?window:global);
